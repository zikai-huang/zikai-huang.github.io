import{_ as b,p as f,r as R,o as S,m as w,n as C,c as l,b as a,w as U,v as I,q as K,F as u,k as _,a as r,t as n,e as $,h as D,i as N,s as p,x as B}from"./index-f184fa8d.js";const c=i=>(D("data-v-e5bdbda1"),i=i(),N(),i),L={class:"search"},V={class:"search-top"},A=c(()=>a("use",{"xlink:href":"#icon-zuojiantou"},null,-1)),F=[A],H=["placeholder","onKeydown"],J={class:"history"},M=c(()=>a("span",null,"历史",-1)),O=["onClick"],j=c(()=>a("use",{"xlink:href":"#icon-shanchu"},null,-1)),q=[j],z={key:0,class:"hotsearch result"},E=c(()=>a("div",{class:"title"},"热门搜索",-1)),T={class:"hotsearch-items items"},G=["onClick"],P={class:"word"},Q={class:"content"},X={key:1,class:"search-result result"},Y=c(()=>a("div",{class:"title"},"搜索结果",-1)),Z={class:"songs items"},x=["onClick"],ss=["onClick"],es={class:"songname"},ts={class:"singers"},as={class:"singer"},os={class:"icons"},ls={key:0,class:"icon hasmv","aria-hidden":"true"},rs=c(()=>a("use",{"xlink:href":"#icon-shipin"},null,-1)),cs=[rs],ns=["onClick"],is=c(()=>a("use",{"xlink:href":"#icon-31liebiao"},null,-1)),ds=[is],hs={__name:"Search",setup(i){const m=f(),y=async e=>{let o=await p(s.searchReault[e].album.id),t={id:s.searchReault[e].id,name:s.searchReault[e].name,picURL:s.searchReault[e].album.artist.img1v1Url,mv:s.searchReault[e].mvid,ar:s.searchReault[e].artists,al:{id:s.searchReault[e].album.id,name:s.searchReault[e].album.name,picUrl:o.data.album.picUrl}};m.playSong(t)},v=async e=>{let o=await p(s.searchReault[e].album.id),t={id:s.searchReault[e].id,name:s.searchReault[e].name,picURL:s.searchReault[e].album.artist.img1v1Url,mv:s.searchReault[e].mvid,ar:s.searchReault[e].artists,al:{id:s.searchReault[e].album.id,name:s.searchReault[e].album.name,picUrl:o.data.album.picUrl}};m.addSong(t)},s=R({keyWordlist:[],searchWord:"",defaultWord:"",hotWord:[],searchReault:[],hotsearch:!0});S(async()=>{let e=await w();s.defaultWord=e.data.data.realkeyword;let o=await C();s.hotWord=o.data.data,s.keyWordlist=JSON.parse(localStorage.getItem("keyWordlist")),s.keyWordlist===null&&(s.keyWordlist=[])});const k=()=>{s.keyWordlist.length>3&&!s.keyWordlist.includes(s.searchWord)&&s.keyWordlist.pop(),s.searchWord!=""&&s.keyWordlist.unshift(s.searchWord.trim());let e=new Set(s.keyWordlist);s.keyWordlist=Array.from(e),localStorage.setItem("keyWordlist",JSON.stringify(s.keyWordlist)),s.searchWord="",W(s.keyWordlist[0])},W=async e=>{let o=await B(e);o.data.result&&(s.searchReault=o.data.result.songs),s.hotsearch=!1},g=()=>{s.keyWordlist=[],localStorage.removeItem("keyWordlist")};return(e,o)=>(r(),l("div",L,[a("div",V,[(r(),l("svg",{class:"icon back","aria-hidden":"true",onClick:o[0]||(o[0]=t=>e.$router.go(-1))},F)),U(a("input",{type:"text",class:"text",placeholder:s.defaultWord,"onUpdate:modelValue":o[1]||(o[1]=t=>s.searchWord=t),onKeydown:K(k,["enter"])},null,40,H),[[I,s.searchWord]]),a("span",{class:"cancel",onClick:o[2]||(o[2]=()=>{s.hotsearch=!0})},"取消")]),a("div",J,[M,(r(!0),l(u,null,_(s.keyWordlist,t=>(r(),l("span",{class:"history-item",key:t,onClick:()=>{s.searchWord=t,k()}},n(t),9,O))),128)),(r(),l("svg",{class:"icon back","aria-hidden":"true",onClick:g,style:{width:".4rem"}},q))]),s.hotsearch?(r(),l("div",z,[E,a("div",T,[(r(!0),l(u,null,_(s.hotWord,t=>(r(),l("div",{class:"hotsearch-item",key:t,onClick:()=>{s.searchWord=t.searchWord,k()}},[a("span",P,n(t.searchWord),1),a("span",Q,n(t.content),1)],8,G))),128))])])):(r(),l("div",X,[Y,a("div",Z,[(r(!0),l(u,null,_(s.searchReault,(t,d)=>(r(),l("div",{class:"song",key:t.id},[a("span",{class:"songid",onClick:h=>y(d)},n(d+1),9,x),a("div",{class:"songInfo",onClick:h=>y(d)},[a("span",es,n(t.name),1),a("div",ts,[(r(!0),l(u,null,_(t.artists,h=>(r(),l("span",as,n(h.name),1))),256))])],8,ss),a("div",os,[t.mvid?(r(),l("svg",ls,cs)):$("",!0),(r(),l("svg",{class:"icon addlist","aria-hidden":"true",onClick:h=>v(d)},ds,8,ns))])]))),128))])]))]))}},_s=b(hs,[["__scopeId","data-v-e5bdbda1"]]);export{_s as default};
