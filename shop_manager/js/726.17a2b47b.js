"use strict";(self["webpackChunkshop_manager"]=self["webpackChunkshop_manager"]||[]).push([[726],{6726:function(e,l,a){a.r(l),a.d(l,{default:function(){return h}});var t=a(3498),o=(a(1844),a(3209)),i=(a(6905),a(9007),a(8131)),n=(a(2064),a(5478)),m=(a(6809),a(573)),c=(a(3877),a(7960),a(7113),a(9866)),r=(a(172),a(7658),a(3396)),d=a(7139),s=a(4870),u=a(2270),w=a(2482);class f{constructor(){(0,w.Z)(this,"selectData",{nickName:"",role:0}),(0,w.Z)(this,"list",[]),(0,w.Z)(this,"roleList",[]),(0,w.Z)(this,"isShow",!1),(0,w.Z)(this,"active",{id:0,nickName:"",role:[],userName:""})}}const k={class:"dialog-footer"};var p=(0,r.aZ)({__name:"UserView",setup(e){(0,r.bv)((()=>{w(),p()}));const l=(0,s.qj)(new f);let a=[];const w=()=>{(0,u.lE)().then((e=>{a=e.data,l.list=e.data}))},p=()=>{(0,u.JV)().then((e=>{l.roleList=e.data}))};function N(){let e=[];l.selectData.nickName||l.selectData.role?(l.selectData.nickName&&(e=l.list.filter((e=>-1!==e.nickName.indexOf(l.selectData.nickName)))),l.selectData.role&&(e=(l.selectData.nickName?e:l.list).filter((e=>e.role.find((e=>e.role===l.selectData.role)))))):e=a,l.list=e}function h(){l.selectData.nickName="",l.selectData.role=0}function v(e){l.active={id:e.id,nickName:e.nickName,role:e.role.map((e=>e.role)),userName:e.userName},l.isShow=!0}function _(e){if(confirm("确认删除该用户？")){const o=l.list.findIndex((l=>l.id==e.id));l.list.splice(o,1);for(var t=0;t<l.list.length;t++)l.list[t].id=t+1;a=l.list.map((e=>e))}}function W(){l.active={id:l.list.length+1,nickName:"",role:[],userName:""},l.isShow=!0}function D(){l.isShow=!1}function b(){let e=l.list.find((e=>e.id==l.active.id));if(void 0!=e)e.nickName=l.active.nickName,e.role=l.active.role.map((e=>1==e?{role:e,roleName:"管理员"}:2==e?{role:e,roleName:"普通用户"}:void 0));else{let e={id:l.active.id,nickName:l.active.nickName,role:l.active.role.map((e=>1==e?{role:e,roleName:"管理员"}:2==e?{role:e,roleName:"普通用户"}:{role:e,roleName:"其他用户"})),userName:l.active.userName};l.list.push(e)}0==l.active.role.length||""==l.active.nickName?alert("用户姓名和用户角色必填！"):(a=l.list.map((e=>e)),l.isShow=!1)}return(0,r.YP)(l.selectData,(()=>{console.log("LocalUser"),console.log(a),l.list=a})),(e,a)=>{const s=c.EZ,u=i.nH,w=m.BT,f=m.km,p=n.mi,g=i.ly,V=o.$Y,U=o.eI,y=t.d0;return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",null,[(0,r.Wm)(g,{inline:!0,model:l.selectData,class:"demo-form-inline"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{label:"姓名"},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{modelValue:l.selectData.nickName,"onUpdate:modelValue":a[0]||(a[0]=e=>l.selectData.nickName=e),placeholder:"请输入姓名"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(u,{label:"角色"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{modelValue:l.selectData.role,"onUpdate:modelValue":a[1]||(a[1]=e=>l.selectData.role=e),class:"m-2",placeholder:"请选择"},{default:(0,r.w5)((()=>[(0,r.Wm)(w,{label:"全部",value:0}),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.roleList,(e=>((0,r.wg)(),(0,r.j4)(w,{key:e.roleId,label:e.roleName,value:e.roleId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p,{type:"primary",onClick:N},{default:(0,r.w5)((()=>[(0,r.Uk)("查询")])),_:1}),(0,r.Wm)(p,{onClick:h},{default:(0,r.w5)((()=>[(0,r.Uk)("重置")])),_:1})])),_:1})])),_:1},8,["model"]),(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p,{type:"primary",onClick:W},{default:(0,r.w5)((()=>[(0,r.Uk)("添加用户")])),_:1})])),_:1}),(0,r.Wm)(U,{data:l.list,border:"",style:{width:"100%"}},{default:(0,r.w5)((()=>[(0,r.Wm)(V,{prop:"id",label:"ID",width:"180"}),(0,r.Wm)(V,{prop:"nickName",label:"姓名",width:"180"}),(0,r.Wm)(V,{prop:"role",label:"角色"},{default:(0,r.w5)((e=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.row.role,(e=>((0,r.wg)(),(0,r.j4)(p,{key:e.role,type:"success"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,d.zw)(e.roleName),1)])),_:2},1024)))),128))])),_:1}),(0,r.Wm)(V,{prop:"role",label:"操作"},{default:(0,r.w5)((e=>[(0,r.Wm)(p,{type:"warning",onClick:l=>v(e.row)},{default:(0,r.w5)((()=>[(0,r.Uk)("编辑")])),_:2},1032,["onClick"]),(0,r.Wm)(p,{type:"danger",onClick:l=>_(e.row)},{default:(0,r.w5)((()=>[(0,r.Uk)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])]),(0,r.Wm)(y,{modelValue:l.isShow,"onUpdate:modelValue":a[4]||(a[4]=e=>l.isShow=e),title:"编辑信息"},{footer:(0,r.w5)((()=>[(0,r._)("span",k,[(0,r.Wm)(p,{type:"primary",onClick:D},{default:(0,r.w5)((()=>[(0,r.Uk)("取消")])),_:1}),(0,r.Wm)(p,{onClick:b},{default:(0,r.w5)((()=>[(0,r.Uk)("确定")])),_:1})])])),default:(0,r.w5)((()=>[(0,r.Wm)(g,{model:l.active},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{label:"姓名","label-width":"50px"},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{modelValue:l.active.nickName,"onUpdate:modelValue":a[2]||(a[2]=e=>l.active.nickName=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(u,{label:"角色","label-width":"50px"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{multiple:"",modelValue:l.active.role,"onUpdate:modelValue":a[3]||(a[3]=e=>l.active.role=e),placeholder:"请选择用户角色"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.roleList,(e=>((0,r.wg)(),(0,r.j4)(w,{key:e.roleId,label:e.roleName,value:e.roleId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])],64)}}});const N=p;var h=N}}]);
//# sourceMappingURL=726.17a2b47b.js.map